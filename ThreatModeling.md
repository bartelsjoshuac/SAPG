<!--- Josh Bartels --->
# Threat Modeling and Observations

![Project Board](https://github.com/users/bartelsjoshuac/projects/2/views/1)

## Part 1: Threat Modeling


### Threats

Our threat examination and mitigation documentation are included below in the HTML reports generated from TMT.

## DFD 1

![Bind Threat](https://github.com/bartelsjoshuac/SAPG/blob/main/images/BINDThreat.jpg)

[Bind Threat TMT Report](https://htmlpreview.github.io/?https://github.com/bartelsjoshuac/SAPG/blob/main/HTML_Files/BINDThreatReport.htm)

----------------------------
<!--- Sam --->
## DFD 2

![MDFY/SRCH](https://github.com/bartelsjoshuac/SAPG/blob/main/images/LdapDelDfd.PNG)

[Modify/Search TMT Report](https://htmlpreview.github.io/?https://github.com/bartelsjoshuac/SAPG/blob/main/HTML_Files/SRCH_MDFY_Threat_Report.htm)



## Part 2: Observations
<!--- Josh Bartels and Adam Stemmler --->

The tool has limitations in that it does not accomodate many aspects of modern software development and network infrastructure, namely modern firewall design, load balancers, or application firewalls, all of which are used today to mitigate threats to the system in its enterity.  While some of the flaws it can find automtically are valid, the majority are mitigated outside the scope of what the tool is considering.  The tool is unable to digest the LDAP protocol and discover more threats associated with LDAP.  Further, after simplifying the drawing to not include the in memory/in process btree database and cache as well as the log files, not much is left for the TMT tool to analyze. Because of this, our first diagram is left feeling somewhat empty. We created a second diagram that shows more pieces of the OpenLDAP process, as well as including other parts that we intentionally left out of the first diagram that are important to demonstrate the full flow of data and analyze security threats. While both diagrams can be applied to each of our scenarios, they encompass different aspects of the scenarios. Our first diagram applies to BIND specifically as BIND does not require as much interaction with data and the database as the other scenarios, but the authentication and login process illustrated by the first DFD can be applied to every scenario. The second DFD applies best to every scenario involving SRCH or MDFY(adding, deleting, otherwise modifying data in the database). 

In terms of threats identified by TMT, they all fall into categories we had identified in our earlier work as potential problems. OpenLDAP does adress many of them, however many others are outside the scope of OpenLDAP and thus OpenLDAP cannot mitigate these threats itself. Thankfully, there is a suite of both hardware and software tools often used in conjunction with OpenLDAP that mitigate the rest of the threats we previously identified and those identified by TMT. As it was relatively small, our first DFD produced only 10 threats for us to mitigate. The STRIDE threat model from the lectures helped us better conceptualize and address previously identified issues, many of which were not as specific as the those identified by TMT. The TMT threats also gave us more concrete examples of the kinds of threats OpenLDAP should be able to resist as relates to data flow. Our mitigations for these threats, such as having multiple failover nodes for OpenLDAP, address each threat, although many mitigations for both DFDs, as discussed, lay outside the scope of OpenLDAP itself. The second DFD threat report generated 32 threats in total. As the second DFD encompasses pieces of the data flow that lay outside the scope of OpenLDAP, many of these threats and their mitigations are also outside the scope of OpenLDAP. For both DFDs, when a threat is left without a mitigation, it is either because it is out of the scope of OpenLDAP, there is no mitigation, or the severity of the threat is low enough not to warrant a mitigation, such as threat 2 from the first DFD threat report.

Many of the mitigations to the threats generated by TMT were addressed in previous assignments. Thankfully, OpenLDAP does have many builtin mitigations. Namely network security features like selective listening for ports and IPs, data integrity and confidentiality features like the SASL method, password storage solutions like numerous hashing algorithms, as well as access control lists, auditing functions, and pass-through authentication that allows OpenLDAP to delgate authentication to other applications and software, like Kerberos. However, there remians issues with OpenLDAP. By its nature, the scope of things within OpenLDAP's control is relatively small compared to the wealth of security issues detailed in the DFD threat reports. As a result, OpenLDAP relies heavily on external tools and the correct configuration and employment of those tools to remain secure. Unfortunately, OpenLDAP has problems surrounding the usage of the security features it does posses as correctly configuring and implementing things like ACLs can be difficult. In addition, and perhaps the largest barrier to the usage of OpenLDAP for organizations that do not have experienced personnel, is the poor default policies and configurations of OpenLDAP features, whose effect is compounded by the difficulty of correctly configuring these policies and features.

<!--- Adam Stemmler --->
### Reflection
Some of our team had issues using TMT, so that inhibited progress slightly. We spent a lot of time on our DFDs. As discussed, our first diagram does not include many aspects of a DFD discussed in the lectures, but through discussions with the professor and back and forth between the team, we decided our first diagram did not need those other aspects and encompassed everything it needed for all our exisitng scenarios. We created the second diagram to reflect other pieces that may be slightly outside the scope of OpenLDAP itself but that make sense to include to visualize the full picture of OpenLDAP data flow. In terms of teamwork, we again need to facilitate team cohesion, but we were able to get all the diagrams and accompanying analysis and documentation completed. 

